<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Alexa & Daniel | Invitaci√≥n de Boda</title>

  <!-- =========================================================
       FUENTES (Google Fonts)
       - Great Vibes: para el estilo tipo "nuestra boda"
       - Montserrat: para el texto general
       ========================================================= -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;400;600;700&display=swap"
    rel="stylesheet"
  >

  <style>
    /* =========================================================
       ESTILOS GENERALES
       ========================================================= */
    :root {
      --bg: #fbf7f2;
      --card: #ffffff;
      --text: #4b433d;
      --muted: #7a716a;
      --accent: #b79262;   /* doradito */
      --accent2: #8fb9a8;  /* verde suave */
      --btn: #9aa08f;      /* bot√≥n RSVP */
      --shadow: 0 12px 30px rgba(0,0,0,0.08);
      --radius: 18px;
    }

    body {
      margin: 0;
      font-family: "Montserrat", Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      text-align: center;
    }

    .wrap {
      max-width: 900px;
      margin: 0 auto;
      padding: 18px;
    }

    /* =========================================================
       TARJETA / SECCIONES
       ========================================================= */
    .card {
      background: rgba(255,255,255,0.75);
      backdrop-filter: blur(8px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 28px 18px;
      margin: 18px 0;
      border: 1px solid rgba(0,0,0,0.04);
    }

    .divider {
      width: 70%;
      max-width: 520px;
      margin: 18px auto;
      height: 1px;
      background: rgba(0,0,0,0.08);
    }

    /* =========================================================
       PORTADA / HERO
       ========================================================= */
    .hero-img {
      width: 100%;
      max-height: 520px;
      object-fit: cover;
      border-radius: var(--radius);
      display: block;
      margin: 0 auto 12px auto;
    }

    .small-top-title {
      letter-spacing: 5px;
      font-size: 14px;
      color: var(--muted);
      font-weight: 600;
      margin-top: 10px;
    }

    /* T√≠tulo tipo ‚Äúnuestra boda‚Äù */
    .script-title {
      font-family: "Great Vibes", cursive;
      font-size: 56px;
      line-height: 1;
      margin: 10px 0 8px;
      color: #4a3e35;
    }

    .subtitle {
      font-size: 18px;
      color: var(--muted);
      margin: 8px 0 0;
    }

    /* =========================================================
       TEXTO INICIAL (m√°s peque√±o, como pediste)
       ========================================================= */
    .intro-text {
      max-width: 760px;
      margin: 0 auto;
      font-size: 16px;        /* m√°s peque√±o */
      line-height: 1.8;
      color: #5c524b;
    }

    .intro-text strong {
      color: #3e3630;
    }

    /* =========================================================
       NOMBRES Y FECHA
       ========================================================= */
    .names {
      font-size: 42px;
      margin: 8px 0;
      color: var(--accent);
      font-weight: 800;
      letter-spacing: 0.4px;
    }

    .date-big {
      font-size: 34px;
      color: var(--accent2);
      margin: 8px 0;
      font-weight: 700;
    }

    .place {
      font-size: 18px;
      margin: 0;
      color: var(--muted);
    }

    /* =========================================================
       COUNTDOWN
       ========================================================= */
    .count-title {
      font-weight: 800;
      letter-spacing: 1px;
      font-size: 24px;
      margin-bottom: 6px;
      color: #657f74;
    }

    .count-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(90px, 1fr));
      gap: 12px;
      max-width: 520px;
      margin: 18px auto 0 auto;
    }

    .count-box {
      background: rgba(255,255,255,0.9);
      border-radius: 16px;
      padding: 14px 10px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.06);
      border: 1px solid rgba(0,0,0,0.05);
    }

    .count-num {
      font-size: 28px;
      font-weight: 800;
      color: #4a3e35;
      margin: 0;
    }

    .count-label {
      margin: 4px 0 0;
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    /* =========================================================
       MUSICA
       ========================================================= */
    .btn {
      background: var(--accent);
      color: #fff;
      border: none;
      padding: 12px 16px;
      border-radius: 12px;
      font-size: 16px;
      cursor: pointer;
      font-weight: 700;
      box-shadow: 0 10px 25px rgba(183,146,98,0.25);
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* =========================================================
       VESTIMENTA
       ========================================================= */
    .dress-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
      margin-top: 14px;
    }

    @media (min-width: 760px) {
      .dress-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    .dress-card {
      background: rgba(255,255,255,0.9);
      border-radius: 16px;
      padding: 16px;
      text-align: left;
      border: 1px solid rgba(0,0,0,0.05);
    }

    .dress-card h3 {
      margin: 0 0 6px;
      color: #4a3e35;
    }

    .dress-card p {
      margin: 0;
      color: var(--muted);
      line-height: 1.6;
    }

    .dress-img {
      width: 100%;
      border-radius: 14px;
      margin-top: 12px;
      object-fit: cover;
      max-height: 360px;
    }

    /* =========================================================
       SECCION GALERIA / RAFAGA
       - Usamos CSS columns para que se vea tipo collage
       ========================================================= */
    .gallery {
      column-count: 2;
      column-gap: 12px;
      max-width: 900px;
      margin: 14px auto 0 auto;
    }

    @media (min-width: 860px) {
      .gallery {
        column-count: 3;
      }
    }

    .gallery img {
      width: 100%;
      border-radius: 14px;
      margin: 0 0 12px;
      display: inline-block;
      break-inside: avoid;
      box-shadow: 0 10px 22px rgba(0,0,0,0.10);
    }

    /* =========================================================
       RSVP (FORM)
       ========================================================= */
    .rsvp-title {
      font-size: 34px;
      font-weight: 900;
      color: #3f3f3f;
      letter-spacing: 2px;
      margin-bottom: 6px;
    }

    .rsvp-sub {
      color: var(--muted);
      margin: 0 0 18px;
    }

    .form-wrap {
      max-width: 560px;
      margin: 0 auto;
      text-align: left;
    }

    .row {
      margin-bottom: 14px;
    }

    label {
      display: block;
      font-size: 14px;
      color: var(--muted);
      margin: 0 0 6px;
    }

    input[type="text"], textarea, select {
      width: 100%;
      padding: 14px 12px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,0.15);
      font-size: 16px;
      outline: none;
      font-family: "Montserrat", Arial, sans-serif;
      background: #fff;
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    .radio-row {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 16px 0;
      text-align: center;
    }

    .radio-row label {
      display: inline-flex;
      gap: 8px;
      align-items: center;
      font-size: 18px;
      color: #5a534d;
      margin: 0;
    }

    .send-btn {
      width: 100%;
      padding: 16px;
      border-radius: 14px;
      border: none;
      background: var(--btn);
      color: #fff;
      font-size: 18px;
      font-weight: 800;
      letter-spacing: 2px;
      cursor: pointer;
      box-shadow: 0 12px 24px rgba(154,160,143,0.25);
      margin-top: 8px;
    }

    .result {
      margin-top: 12px;
      font-size: 15px;
      color: #4a3e35;
      text-align: center;
      min-height: 20px;
    }

    .fineprint {
      text-align: center;
      color: var(--muted);
      font-size: 13px;
      margin-top: 10px;
    }

    /* =========================================================
       WHATSAPP
       ========================================================= */
    .whatsapp {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      justify-content: center;
      text-decoration: none;
      padding: 12px 16px;
      border-radius: 14px;
      background: #25D366;
      color: white;
      font-weight: 800;
      letter-spacing: 0.2px;
      box-shadow: 0 12px 24px rgba(37,211,102,0.25);
      margin-top: 8px;
    }

    .wa-icon {
      font-size: 20px;
      line-height: 1;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- =========================================================
         1) PORTADA (FOTO PRINCIPAL)
         - Cambia "foto-portada.jpg" si tu archivo tiene otro nombre
         ========================================================= -->
    <div class="card">
      <img class="hero-img" src="foto-portada.jpg" alt="Foto de portada de Mar√≠a Alexandra y Daniel">
      <div class="small-top-title">EST√ÅS INVITADO A</div>
      <div class="script-title">nuestra boda</div>
      <p class="subtitle">Nos encantar√≠a que seas parte de este momento tan especial para nosotros.</p>
    </div>

    <!-- =========================================================
         2) TEXTO INICIAL (SIN LA LETRA DE LA CANCI√ìN)
         ========================================================= -->
    <div class="card">
      <div class="intro-text">
        Teniendo principalmente como testigo y gu√≠a de nuestra historia a <strong>Dios</strong>,
        sin temor a equivocarnos y con la firme convicci√≥n de que el final de esta historia
        solo lo decidir√° √âl cuando apague alguno de nuestros corazones,
        <strong>hemos decidido unir nuestras vidas en matrimonio.</strong>
      </div>

      <div class="divider"></div>

      <div style="margin-top:10px; font-size:18px; color: var(--muted);">Nos casamos</div>
      <div class="names">Mar√≠a Alexandra Gil &amp; Daniel √Ålvarez</div>

      <!-- =========================================================
           3) FECHA (CORREGIDA)
           ========================================================= -->
      <div class="date-big">Viernes 13 de noviembre de 2026</div>

      <!-- =========================================================
           4) LUGAR (PENDIENTE POR CONFIRMAR)
           ========================================================= -->
      <p class="place"><strong>Lugar:</strong> Pendiente por confirmar (Cove√±as, Sucre)</p>
    </div>

    <!-- =========================================================
         5) CUENTA REGRESIVA (D√çAS, HORAS, MINUTOS, SEGUNDOS)
         ========================================================= -->
    <div class="card">
      <div class="count-title">‚è≥ Cuenta regresiva</div>
      <div style="color: var(--muted); font-size: 14px;">Faltan...</div>

      <div class="count-grid" aria-label="Contador">
        <div class="count-box">
          <p class="count-num" id="cdDays">--</p>
          <p class="count-label">D√≠as</p>
        </div>
        <div class="count-box">
          <p class="count-num" id="cdHours">--</p>
          <p class="count-label">Horas</p>
        </div>
        <div class="count-box">
          <p class="count-num" id="cdMinutes">--</p>
          <p class="count-label">Minutos</p>
        </div>
        <div class="count-box">
          <p class="count-num" id="cdSeconds">--</p>
          <p class="count-label">Segundos</p>
        </div>
      </div>
    </div>

    <!-- =========================================================
         6) M√öSICA
         - SUBE tu MP3 con el nombre: musica.mp3
         - Los navegadores SOLO permiten autoplay si el usuario interact√∫a,
           por eso usamos un bot√≥n.
         ========================================================= -->
    <div class="card">
      <h2 style="margin:0; color:#657f74;">üéµ M√∫sica</h2>
      <p style="color: var(--muted); margin-top:8px;">
        Presiona el bot√≥n para activar la m√∫sica.
      </p>

      <button class="btn" id="btnMusic">‚ñ∂Ô∏è Activar m√∫sica</button>

      <audio id="music" loop>
        <source src="musica.mp3" type="audio/mpeg">
        Tu navegador no soporta audio.
      </audio>
    </div>

    <!-- =========================================================
         7) GALER√çA (COLLAGE / RAFAGA) - 15 FOTOS
         - Sube fotos con nombres: galeria-01.jpg ... galeria-15.jpg
         ========================================================= -->
    <div class="card">
      <h2 style="margin:0; color:#657f74;">üì∏ Recuerdos</h2>
      <p style="color: var(--muted); margin-top:8px;">
        Algunas fotos de nuestra historia ‚ù§Ô∏è
      </p>

      <div class="gallery">
        <img src="galeria-01.jpg" alt="Galer√≠a 01">
        <img src="galeria-02.jpg" alt="Galer√≠a 02">
        <img src="galeria-03.jpg" alt="Galer√≠a 03">
        <img src="galeria-04.jpg" alt="Galer√≠a 04">
        <img src="galeria-05.jpg" alt="Galer√≠a 05">
        <img src="galeria-06.jpg" alt="Galer√≠a 06">
        <img src="galeria-07.jpg" alt="Galer√≠a 07">
        <img src="galeria-08.jpg" alt="Galer√≠a 08">
        <img src="galeria-09.jpg" alt="Galer√≠a 09">
        <img src="galeria-10.jpg" alt="Galer√≠a 10">
        <img src="galeria-11.jpg" alt="Galer√≠a 11">
        <img src="galeria-12.jpg" alt="Galer√≠a 12">
        <img src="galeria-13.jpg" alt="Galer√≠a 13">
        <img src="galeria-14.jpg" alt="Galer√≠a 14">
        <img src="galeria-15.jpg" alt="Galer√≠a 15">
      </div>

      <p class="fineprint">
        *Si alguna foto no aparece, revisa que el nombre del archivo est√© EXACTO.
      </p>
    </div>

    <!-- =========================================================
         8) VESTIMENTA (ACTUALIZADA)
         - Mujeres: quitar "tac√≥n bajo" e indicar que se recomienda no llevar tac√≥n
         - Espacio para im√°genes de referencia
         ========================================================= -->
    <div class="card">
      <h2 style="margin:0; color:#657f74;">üëó Vestimenta</h2>
      <p style="color: var(--muted); margin-top:8px;">
        Boda en la playa ‚Äì colores pasteles, estilo elegante.
      </p>

      <div class="dress-grid">

        <!-- HOMBRES -->
        <div class="dress-card">
          <h3>ü§µ Hombres</h3>
          <p>
            Camisa blanca o tonos claros, pantal√≥n beige/arena, estilo fresco y elegante para clima de playa.
          </p>

          <!-- Imagen de referencia hombres -->
          <img class="dress-img" src="vestimenta-hombres.jpg" alt="Referencia de vestimenta para hombres">
        </div>

        <!-- MUJERES -->
        <div class="dress-card">
          <h3>üë∞ Mujeres</h3>
          <p>
            Vestido largo en tonos pasteles o tierra, tela fresca (ideal para playa).
            <strong>Recomendamos no llevar tac√≥n</strong> por la arena (mejor sandalias elegantes o plataformas).
          </p>

          <!-- Imagen de referencia mujeres -->
          <img class="dress-img" src="vestimenta-mujeres.jpg" alt="Referencia de vestimenta para mujeres">
        </div>

      </div>
    </div>

    <!-- =========================================================
         9) MENSAJE IMPORTANTE (CONFIRMAR EN 1 MES)
         - ‚ÄúMuy polite‚Äù pero firme
         ========================================================= -->
    <div class="card">
      <h2 style="margin:0; color:#657f74;">üïäÔ∏è Confirmaci√≥n</h2>
      <p style="color: var(--muted); margin-top:10px; max-width:760px; margin-left:auto; margin-right:auto; line-height:1.7;">
        Para una mejor organizaci√≥n, te agradecemos confirmar tu asistencia
        <strong>dentro del plazo de 1 mes</strong> a partir de recibir esta invitaci√≥n.
        <br><br>
        Si no recibimos tu confirmaci√≥n dentro de ese tiempo, asumiremos con mucho respeto que no podr√°s acompa√±arnos.
        ¬°Gracias por ayudarnos a planear este d√≠a tan especial!
      </p>
    </div>

    <!-- =========================================================
         10) RSVP (FORMULARIO) - ENVIAR A GOOGLE SHEETS (APPS SCRIPT)
         - Usamos tu URL: (NO la cambiamos)
         - Bloqueo extra por navegador se puede activar con localStorage
         ========================================================= -->
    <div class="card">
      <div class="rsvp-title">CONFIRMAR ASISTENCIA</div>
      <p class="rsvp-sub">Por favor, confirma tu asistencia. ¬°Esperamos que est√©s all√≠!</p>

      <div class="form-wrap">
        <form id="rsvpForm">

          <!-- Radios asistencia -->
          <div class="radio-row">
            <label>
              <input type="radio" name="asistencia" value="S√≠, all√≠ estar√©" checked>
              S√≠, all√≠ estar√©
            </label>
            <label>
              <input type="radio" name="asistencia" value="No podr√© asistir">
              No podr√© asistir
            </label>
          </div>

          <!-- Responsable -->
          <div class="row">
            <label for="responsable">Nombre del responsable (quien confirma)</label>
            <input id="responsable" type="text" placeholder="Ej: Fernando Alvarez" required>
          </div>

          <!-- Cantidad -->
          <div class="row">
            <label for="cantidad">¬øCu√°ntas personas incluye esta invitaci√≥n?</label>
            <select id="cantidad" required>
              <option value="1">1 persona</option>
              <option value="2">2 personas</option>
              <option value="3">3 personas</option>
              <option value="4">4 personas</option>
              <option value="5">5 personas</option>
              <option value="6">6 personas</option>
            </select>
          </div>

          <!-- Invitados -->
          <div class="row">
            <label for="inv1">Nombre del invitado 1</label>
            <input id="inv1" type="text" placeholder="Ej: Fernando Alvarez" required>
          </div>

          <div class="row" id="rowInv2" style="display:none;">
            <label for="inv2">Nombre del invitado 2</label>
            <input id="inv2" type="text" placeholder="Ej: ..." />
          </div>

          <div class="row" id="rowInv3" style="display:none;">
            <label for="inv3">Nombre del invitado 3</label>
            <input id="inv3" type="text" placeholder="Ej: ..." />
          </div>

          <div class="row" id="rowInv4" style="display:none;">
            <label for="inv4">Nombre del invitado 4</label>
            <input id="inv4" type="text" placeholder="Ej: ..." />
          </div>

          <div class="row" id="rowInv5" style="display:none;">
            <label for="inv5">Nombre del invitado 5</label>
            <input id="inv5" type="text" placeholder="Ej: ..." />
          </div>

          <div class="row" id="rowInv6" style="display:none;">
            <label for="inv6">Nombre del invitado 6</label>
            <input id="inv6" type="text" placeholder="Ej: ..." />
          </div>

          <!-- Alergias -->
          <div class="row">
            <label for="alergias">Intolerancias o alergias alimentarias</label>
            <input id="alergias" type="text" placeholder="Ej: Ninguna" />
          </div>

          <!-- Canci√≥n -->
          <div class="row">
            <label for="cancion">¬øQu√© canci√≥n no puede faltar?</label>
            <input id="cancion" type="text" placeholder="Ej: ..." />
          </div>

          <!-- Mensaje -->
          <div class="row">
            <label for="mensaje">Mensaje para los novios</label>
            <textarea id="mensaje" placeholder="Escribe aqu√≠ tu mensaje..."></textarea>
          </div>

          <!-- Bot√≥n enviar -->
          <button class="send-btn" id="btnSend" type="submit">ENVIAR RESPUESTA</button>

          <!-- Mensaje resultado -->
          <div class="result" id="result"></div>

          <div class="fineprint">
            *Tu respuesta quedar√° guardada autom√°ticamente en Google Sheets.
          </div>
        </form>
      </div>
    </div>

    <!-- =========================================================
         11) WHATSAPP (LINK DIRECTO)
         - S√≠mbolo WhatsApp + link directo a tu n√∫mero
         ========================================================= -->
    <div class="card">
      <h2 style="margin:0; color:#657f74;">‚ùì ¬øDudas o preguntas?</h2>
      <p style="color: var(--muted); margin-top:10px;">
        Escr√≠benos por WhatsApp y con gusto te ayudamos.
      </p>

      <a class="whatsapp" target="_blank"
         href="https://wa.me/573028610838?text=Hola%20Alexa%20y%20Daniel%2C%20tengo%20una%20pregunta%20sobre%20la%20boda%20%E2%9D%A4%EF%B8%8F">
        <span class="wa-icon">üü¢</span>
        <span>WhatsApp: +57 302 861 0838</span>
      </a>
    </div>

  </div>

  <script>
    /* =========================================================
       CONFIGURACI√ìN
       ========================================================= */

    // URL de tu Apps Script (la que ya me diste)
    const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyfFfm4Xi_17QaxKPAN8RLziPAw1NiYuByWMy6ttifwUANZecb_v5DNStsm5pCtvhzk7w/exec";

    // Bloqueo opcional por navegador (si lo quieres activar)
    const LOCAL_LOCK_KEY = "rsvp_submitted_v1";

    /* =========================================================
       1) COUNTDOWN (D√çAS, HORAS, MINUTOS, SEGUNDOS)
       - Ajusta la hora si quieres (ej: 16:00)
       ========================================================= */
    const weddingDate = new Date("November 13, 2026 16:00:00").getTime();

    function updateCountdown() {
      const now = new Date().getTime();
      let distance = weddingDate - now;

      // Si ya pas√≥ la fecha
      if (distance < 0) distance = 0;

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      document.getElementById("cdDays").textContent = String(days).padStart(2, "0");
      document.getElementById("cdHours").textContent = String(hours).padStart(2, "0");
      document.getElementById("cdMinutes").textContent = String(minutes).padStart(2, "0");
      document.getElementById("cdSeconds").textContent = String(seconds).padStart(2, "0");
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();

    /* =========================================================
       2) M√öSICA (bot√≥n)
       ========================================================= */
    const btnMusic = document.getElementById("btnMusic");
    const music = document.getElementById("music");

    btnMusic.addEventListener("click", async () => {
      try {
        await music.play();
        btnMusic.textContent = "‚è∏Ô∏è Pausar m√∫sica";
        btnMusic.onclick = () => {
          if (!music.paused) {
            music.pause();
            btnMusic.textContent = "‚ñ∂Ô∏è Activar m√∫sica";
            btnMusic.onclick = null;
            btnMusic.addEventListener("click", async () => {
              await music.play();
              btnMusic.textContent = "‚è∏Ô∏è Pausar m√∫sica";
            }, { once: true });
          }
        };
      } catch (e) {
        alert("Tu navegador bloque√≥ el audio. Intenta nuevamente tocando el bot√≥n.");
      }
    });

    /* =========================================================
       3) MOSTRAR/OCULTAR INVITADOS SEG√öN CANTIDAD
       ========================================================= */
    const cantidadEl = document.getElementById("cantidad");
    const rows = {
      2: document.getElementById("rowInv2"),
      3: document.getElementById("rowInv3"),
      4: document.getElementById("rowInv4"),
      5: document.getElementById("rowInv5"),
      6: document.getElementById("rowInv6"),
    };

    function toggleGuests() {
      const cantidad = Number(cantidadEl.value);

      // Ocultamos todos del 2 al 6
      Object.values(rows).forEach(r => r.style.display = "none");

      // Mostramos solo los necesarios
      for (let i = 2; i <= cantidad; i++) {
        if (rows[i]) rows[i].style.display = "block";
      }
    }

    cantidadEl.addEventListener("change", toggleGuests);
    toggleGuests();

    /* =========================================================
       4) FORM SUBMIT ‚Üí Apps Script
       - Envia EXACTAMENTE: asistencia, responsable, cantidad, invitados[], alergias, cancion, mensaje, info
       ========================================================= */
    const form = document.getElementById("rsvpForm");
    const btnSend = document.getElementById("btnSend");
    const result = document.getElementById("result");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      // Si quieres activar bloqueo fuerte por navegador:
      // if (localStorage.getItem(LOCAL_LOCK_KEY) === "1") {
      //   alert("Ya registraste una confirmaci√≥n desde este navegador.");
      //   return;
      // }

      btnSend.disabled = true;
      result.textContent = "Enviando...";

      // Asistencia
      const asistencia = document.querySelector('input[name="asistencia"]:checked')?.value || "";

      // Responsable
      const responsable = document.getElementById("responsable").value.trim();

      // Cantidad
      const cantidad = Number(document.getElementById("cantidad").value);

      // Invitados (solo visibles)
      const invitados = [];
      const inv1 = document.getElementById("inv1").value.trim();
      const inv2 = document.getElementById("inv2").value.trim();
      const inv3 = document.getElementById("inv3").value.trim();
      const inv4 = document.getElementById("inv4").value.trim();
      const inv5 = document.getElementById("inv5").value.trim();
      const inv6 = document.getElementById("inv6").value.trim();

      if (inv1) invitados.push(inv1);
      if (cantidad >= 2 && inv2) invitados.push(inv2);
      if (cantidad >= 3 && inv3) invitados.push(inv3);
      if (cantidad >= 4 && inv4) invitados.push(inv4);
      if (cantidad >= 5 && inv5) invitados.push(inv5);
      if (cantidad >= 6 && inv6) invitados.push(inv6);

      // Otros campos
      const alergias = document.getElementById("alergias").value.trim();
      const cancion = document.getElementById("cancion").value.trim();
      const mensaje = document.getElementById("mensaje").value.trim();

      // Info del navegador (NO es IP real, pero ayuda para bloqueo)
      const info = navigator.userAgent || "";

      // Si marcan "No podr√© asistir", opcionalmente ponemos cantidad 0 y limpiamos invitados
      // (Si quieres que sea obligatorio as√≠, lo dejamos)
      let finalCantidad = cantidad;
      let finalInvitados = invitados;

      if (asistencia.toLowerCase().includes("no podr√©")) {
        finalCantidad = 0;
        finalInvitados = [];
      }

      // Payload final
      const payload = {
        asistencia,
        responsable,
        cantidad: finalCantidad,
        invitados: finalInvitados,
        alergias,
        cancion,
        mensaje,
        info
      };

      try {
        const res = await fetch(APPS_SCRIPT_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        const data = await res.json();

        if (data.ok) {
          result.textContent = "‚úÖ " + (data.message || "Confirmaci√≥n registrada correctamente.");
          localStorage.setItem(LOCAL_LOCK_KEY, "1");
          // form.reset(); toggleGuests(); // si quieres resetear tras enviar
        } else {
          result.textContent = "‚ùå " + (data.message || "No se pudo registrar.");
          btnSend.disabled = false;
        }

      } catch (err) {
        result.textContent = "‚ùå Error enviando: " + err.toString();
        btnSend.disabled = false;
      }
    });
  </script>
</body>
</html>
