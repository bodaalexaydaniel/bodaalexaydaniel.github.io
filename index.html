<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Alexa & Daniel | Invitación</title>

  <!-- =========================
       FUENTES (Google Fonts)
       - "Great Vibes" para títulos tipo caligrafía
       - "Montserrat" para el resto
       ========================= -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;400;600;700&display=swap"
    rel="stylesheet"
  >

  <style>
    /* =========================
       ESTILOS GENERALES
       ========================= */
    :root{
      --bg: #fbf6ef;
      --text: #4d463f;
      --muted: #7a726a;
      --accent: #9aa38f;     /* verde suave (botones) */
      --accentDark: #7f8775;
      --card: #ffffff;
      --border: #e8dfd3;
      --title: #c3a06b;      /* dorado suave */
    }

    body{
      margin:0;
      font-family: "Montserrat", Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      text-align:center;
    }

    .wrap{
      max-width: 900px;
      margin: 0 auto;
      padding: 28px 16px 60px;
    }

    /* =========================
       CABECERA / FOTO PORTADA
       ========================= */
    .hero{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      margin-bottom: 22px;
    }

    .hero img{
      width: 100%;
      height: auto;
      display:block;
    }

    .hero-caption{
      padding: 18px 18px 26px;
      border-top: 1px solid var(--border);
    }

    .small-top{
      letter-spacing: 3px;
      font-size: 14px;
      color: var(--muted);
      margin-top: 4px;
    }

    .main-title{
      font-family: "Great Vibes", cursive;
      font-size: 62px;
      margin: 10px 0 8px;
      color: #3b352f;
      line-height: 1;
    }

    .subtitle{
      font-size: 18px;
      color: var(--muted);
      margin: 0 0 6px;
    }

    .divider{
      width: 80%;
      max-width: 520px;
      margin: 16px auto;
      border: none;
      border-top: 1px solid var(--border);
    }

    /* =========================
       TEXTO INICIAL (más pequeño)
       ========================= */
    .intro{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 22px 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      margin-bottom: 22px;
    }

    .intro p{
      margin: 10px 0;
      font-size: 15px;        /* más pequeño como pediste */
      color: #5b524a;
      line-height: 1.7;
    }

    .poem{
      font-style: italic;
      color: #5c554e;
      margin-top: 10px;
      margin-bottom: 14px;
    }

    .strong-line{
      font-weight: 700;
      margin-top: 10px;
    }

    /* =========================
       SECCIONES
       ========================= */
    .section{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 22px 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      margin-bottom: 22px;
    }

    .section h2{
      margin: 0 0 10px;
      font-size: 28px;
      color: #3b352f;
      letter-spacing: 2px;
    }

    .section .hint{
      margin: 0 0 18px;
      color: var(--muted);
    }

    /* =========================
       FORMULARIO RSVP (estilo tarjeta)
       ========================= */
    .form-card{
      max-width: 560px;
      margin: 0 auto;
      text-align: left;
    }

    label{
      display:block;
      margin: 14px 0 6px;
      color: var(--muted);
      font-size: 14px;
    }

    input[type="text"], select, textarea{
      width: 100%;
      padding: 14px 14px;
      border-radius: 10px;
      border: 1px solid #d8d3cb;
      font-size: 16px;
      outline: none;
      box-sizing: border-box;
      background: #fff;
    }

    textarea{
      min-height: 120px;
      resize: vertical;
    }

    /* Radios (Sí / No) */
    .radio-row{
      display:flex;
      gap: 20px;
      justify-content: center;
      align-items:center;
      margin: 8px 0 8px;
      flex-wrap: wrap;
    }

    .radio-row label{
      margin: 0;
      color: var(--text);
      font-size: 16px;
    }

    .radio-row input{
      transform: scale(1.15);
      margin-right: 8px;
    }

    /* Botón */
    .btn{
      width: 100%;
      margin-top: 18px;
      padding: 16px 18px;
      border: none;
      border-radius: 12px;
      background: var(--accent);
      color: #fff;
      font-weight: 700;
      font-size: 18px;
      cursor: pointer;
      letter-spacing: 1px;
    }

    .btn:hover{ background: var(--accentDark); }

    /* Mensajes de estado (éxito/error) */
    .status{
      margin-top: 14px;
      font-size: 14px;
      color: var(--muted);
      text-align:center;
    }

    .status.ok{ color: #2f6b3f; font-weight: 600; }
    .status.err{ color: #a53d3d; font-weight: 600; }

    /* =========================
       IMÁGENES DE VESTIMENTA
       ========================= */
    .dress-grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      max-width: 780px;
      margin: 0 auto;
      text-align: left;
    }

    .dress-item{
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow:hidden;
      background: #fff;
    }

    .dress-item img{
      width: 100%;
      display:block;
      height:auto;
    }

    .dress-item .cap{
      padding: 14px;
    }

    .dress-item .cap h3{
      margin: 0 0 6px;
      color: #3b352f;
    }

    .dress-item .cap p{
      margin: 0;
      color: var(--muted);
      line-height: 1.6;
      font-size: 14px;
    }

    /* Ajustes responsive */
    @media (min-width: 760px){
      .dress-grid{ grid-template-columns: 1fr 1fr; }
      .main-title{ font-size: 72px; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- =========================
         1) FOTO DE PORTADA (sube tu foto al repo y nómbrala EXACTO así)
         Archivo: foto-portada.jpg
         ========================= -->
    <div class="hero">
      <img src="foto-portada.jpg" alt="Foto de portada de María Alexandra y Daniel">
      <div class="hero-caption">
        <div class="small-top">ESTÁS INVITADO A</div>
        <div class="main-title">nuestra boda</div>
        <div class="subtitle">Nos encantaría que seas parte de este momento tan especial para nosotros.</div>
      </div>
    </div>

    <!-- =========================
         2) TEXTO INICIAL (más pequeño y con tus correcciones)
         ========================= -->
    <div class="intro">
      <p class="poem">
        Eres todo lo que tengo,<br>
        mi sonrisa, mi ilusión.<br>
        Que lo sepa el mundo entero:<br>
        eres tú, mi gran pasión.<br><br>

        Te has robado mi energía,<br>
        mi tristeza y mi alegría.<br>
        Eres dueña de mi amor.
      </p>

      <hr class="divider">

      <p>
        Teniendo principalmente como testigo y guía de nuestra historia a <b>Dios</b>,
        sin temor a equivocarnos y con la firme convicción de que el final de esta historia
        solo lo decidirá Él cuando apague alguno de nuestros corazones, hemos decidido unir
        nuestras vidas en matrimonio.
      </p>

      <p class="strong-line">Nos casamos</p>

      <h1 style="margin:8px 0 0; color: var(--title); font-size: 40px;">
        María Alexandra Gil &amp; Daniel Álvarez
      </h1>
      <p style="margin:10px 0 0; font-size: 22px; color: #8fb9a8; font-weight:700;">
        Viernes 13 de noviembre de 2026
      </p>
      <p style="margin:8px 0 0; color: var(--muted);">
        Coveñas, Sucre
      </p>
    </div>

    <!-- =========================
         3) VESTIMENTA (con espacio para imágenes de referencia)
         Nombres recomendados:
         - vestimenta-hombres.jpg
         - vestimenta-mujeres.jpg
         ========================= -->
    <div class="section">
      <h2>VESTIMENTA</h2>
      <p class="hint">Playa elegante • colores pasteles • formal</p>

      <div class="dress-grid">
        <div class="dress-item">
          <!-- Imagen de referencia hombres -->
          <img src="vestimenta-hombres.jpg" alt="Referencia vestimenta hombres">
          <div class="cap">
            <h3>Hombres</h3>
            <p>
              Camisa blanca tipo lino o fresca, pantalón claro (beige/arena),
              estilo elegante para playa. Zapato cómodo (puede ser mocasín) o sandalia fina.
            </p>
          </div>
        </div>

        <div class="dress-item">
          <!-- Imagen de referencia mujeres -->
          <img src="vestimenta-mujeres.jpg" alt="Referencia vestimenta mujeres">
          <div class="cap">
            <h3>Mujeres</h3>
            <p>
              Vestido largo en tonos suaves / pasteles, tela fresca, estilo elegante para playa.
              Calzado cómodo (sandalia formal o tacón ancho).
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- =========================
         4) CONFIRMAR ASISTENCIA (guarda en Google Sheets)
         IMPORTANTE:
         - Pegamos tu URL del Apps Script aquí
         ========================= -->
    <div class="section">
      <h2>CONFIRMAR ASISTENCIA</h2>
      <p class="hint">Por favor, confirma tu asistencia. ¡Esperamos que estés allí!</p>

      <div class="form-card">

        <!-- =========================
             Radios: Sí / No
             name="asistencia" es lo que lee JS
             ========================= -->
        <div class="radio-row">
          <label>
            <input type="radio" name="asistencia" value="Sí, allí estaré" checked>
            Sí, allí estaré
          </label>

          <label>
            <input type="radio" name="asistencia" value="No podré asistir">
            No podré asistir
          </label>
        </div>

        <!-- =========================
             RESPONSABLE (ESTO ES LO QUE TE ESTÁ QUEDANDO VACÍO)
             ✅ id="responsable" es CLAVE porque el JS lo toma por ID
             ========================= -->
        <label for="responsable">Nombre del responsable (quien confirma)</label>
        <input type="text" id="responsable" placeholder="Ej: Fernando Álvarez" required>

        <!-- =========================
             CANTIDAD (1 a 6)
             ✅ id="cantidad" es CLAVE
             ========================= -->
        <label for="cantidad">¿Cuántas personas incluye esta invitación?</label>
        <select id="cantidad">
          <option value="1">1 persona</option>
          <option value="2">2 personas</option>
          <option value="3">3 personas</option>
          <option value="4">4 personas</option>
          <option value="5">5 personas</option>
          <option value="6">6 personas</option>
        </select>

        <!-- =========================
             INVITADOS (se generan dinámicamente 1..6)
             El JS crea los inputs con ids:
             invitado1, invitado2, ...
             ========================= -->
        <div id="invInputs"></div>

        <!-- =========================
             ALERGIAS
             ========================= -->
        <label for="alergias">Intolerancias o alergias alimentarias</label>
        <input type="text" id="alergias" placeholder="Ej: Ninguna">

        <!-- =========================
             CANCIÓN
             ========================= -->
        <label for="cancion">¿Qué canción no puede faltar?</label>
        <input type="text" id="cancion" placeholder="Ej: Mi canción favorita">

        <!-- =========================
             MENSAJE
             ========================= -->
        <label for="mensaje">Mensaje para los novios</label>
        <textarea id="mensaje" placeholder="Escribe tu mensaje aquí..."></textarea>

        <!-- =========================
             BOTÓN ENVIAR
             ========================= -->
        <button class="btn" id="btnEnviar">ENVIAR RESPUESTA</button>

        <!-- Mensaje de estado -->
        <div id="status" class="status">
          *Tu respuesta quedará guardada automáticamente en Google Sheets.
        </div>

      </div>
    </div>

  </div>

  <script>
    // =========================
    // CONFIG: Tu Apps Script URL
    // =========================
    const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyfFfm4Xi_17QaxKPAN8RLziPAw1NiYuByWMy6ttifwUANZecb_v5DNStsm5pCtvhzk7w/exec";

    // =========================
    // 1) Generar inputs de Invitados según cantidad
    // =========================
    const cantidadEl = document.getElementById("cantidad");
    const invInputsEl = document.getElementById("invInputs");

    function renderInvitados() {
      const n = parseInt(cantidadEl.value, 10);
      invInputsEl.innerHTML = ""; // limpiamos

      // Creamos Invitado 1..n
      for (let i = 1; i <= n; i++) {
        const label = document.createElement("label");
        label.setAttribute("for", "invitado" + i);
        label.textContent = "Nombre del invitado " + i;

        const input = document.createElement("input");
        input.type = "text";
        input.id = "invitado" + i;
        input.placeholder = "Ej: Nombre Apellido";

        invInputsEl.appendChild(label);
        invInputsEl.appendChild(input);
      }
    }

    // Render inicial y cuando cambie la cantidad
    renderInvitados();
    cantidadEl.addEventListener("change", renderInvitados);

    // =========================
    // 2) Enviar datos al Apps Script
    // =========================
    const btnEnviar = document.getElementById("btnEnviar");
    const statusEl = document.getElementById("status");

    btnEnviar.addEventListener("click", async (ev) => {
      ev.preventDefault();

      // --- Tomamos asistencia del radio seleccionado ---
      const asistencia = document.querySelector('input[name="asistencia"]:checked')?.value || "";

      // --- Tomamos responsable (ESTO ES CLAVE) ---
      const responsable = document.getElementById("responsable").value.trim();

      // Validación simple
      if (!responsable) {
        statusEl.className = "status err";
        statusEl.textContent = "Por favor escribe el nombre del responsable.";
        return;
      }

      // --- Tomamos cantidad ---
      const cantidad = parseInt(document.getElementById("cantidad").value, 10);

      // --- Tomamos invitados ---
      const invitados = [];
      for (let i = 1; i <= cantidad; i++) {
        const val = document.getElementById("invitado" + i)?.value?.trim() || "";
        invitados.push(val);
      }

      // --- Otros campos ---
      const alergias = document.getElementById("alergias").value.trim();
      const cancion = document.getElementById("cancion").value.trim();
      const mensaje = document.getElementById("mensaje").value.trim();

      // --- Info del navegador (esto va a tu columna IP/Info) ---
      const info = navigator.userAgent;

      // --- Armamos payload EXACTO como tu Apps Script espera ---
      const payload = {
        asistencia: asistencia,
        responsable: responsable,
        cantidad: cantidad,
        invitados: invitados,
        alergias: alergias,
        cancion: cancion,
        mensaje: mensaje,
        info: info
      };

      // --- UI: desactivar botón mientras envía ---
      btnEnviar.disabled = true;
      btnEnviar.textContent = "ENVIANDO...";

      statusEl.className = "status";
      statusEl.textContent = "Enviando confirmación...";

      try {
        const res = await fetch(APPS_SCRIPT_URL, {
          method: "POST",
          headers: { "Content-Type": "text/plain;charset=utf-8" },
          body: JSON.stringify(payload)
        });

        const json = await res.json();

        // Si el script respondió ok:true
        if (json.ok) {
          statusEl.className = "status ok";
          statusEl.textContent = json.message || "¡Confirmación registrada!";

          // (Opcional) limpiar formulario
          // document.getElementById("responsable").value = "";
          // document.getElementById("alergias").value = "";
          // document.getElementById("cancion").value = "";
          // document.getElementById("mensaje").value = "";

        } else {
          statusEl.className = "status err";
          statusEl.textContent = json.message || "No se pudo registrar. Intenta de nuevo.";
        }

      } catch (err) {
        statusEl.className = "status err";
        statusEl.textContent = "Error enviando la confirmación. Revisa tu Apps Script / permisos.";
      } finally {
        btnEnviar.disabled = false;
        btnEnviar.textContent = "ENVIAR RESPUESTA";
      }
    });
  </script>

</body>
</html>
