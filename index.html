<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitaci√≥n - Alexandra & Daniel</title>

  <!-- =========================
       FUENTES (Google Fonts)
       ========================= -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;400;600;700&display=swap"
    rel="stylesheet"
  />

  <style>
    /* =========================
       VARIABLES DE DISE√ëO
       ========================= */
    :root{
      --bg: #f6f1ea;
      --card: rgba(255,255,255,0.90);
      --text: #5e5a55;
      --title: #6a645f;
      --accent: #9aa58e;
      --accent-dark: #7f8a73;
      --gold: #b89c6a;
      --shadow: 0 10px 30px rgba(0,0,0,0.08);
      --radius: 18px;
      --maxw: 980px;
      --script: "Great Vibes", cursive;
      --body: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* =========================
       BASE
       ========================= */
    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: var(--body);
      color: var(--text);

      /* Fondo real (archivo fondo-playa.jpg) */
      background-color: var(--bg);
      background-image: url("fondo-playa.jpg");
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
    }

    /* Capa suave para lectura sobre el fondo */
    .bg-overlay{
      min-height:100vh;
      background: linear-gradient(
        rgba(246,241,234,0.78),
        rgba(246,241,234,0.78)
      );
      padding: 18px 14px 60px;
    }

    .wrap{
      max-width: var(--maxw);
      margin: 0 auto;
    }

    /* Tarjetas (cada secci√≥n dentro de un ‚Äúcard‚Äù) */
    .card{
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.06);
      backdrop-filter: blur(6px);
    }

    .section{
      margin-top: 16px;
      padding: 22px 18px;
    }

    .hr{
      height:1px;
      background: rgba(0,0,0,0.08);
      margin: 18px 0;
    }

    /* =========================
       PORTADA
       ========================= */
    .hero-img{
      width:100%;
      height: clamp(240px, 38vw, 480px);
      object-fit: cover;
      display:block;
    }

    /* =========================
       INTRO
       ========================= */
    .intro-text{
      text-align:center;
      font-size: 16px;
      line-height: 1.8;
      padding: 0 10px;
    }
    .intro-strong{
      font-weight: 700;
      color: #4f4a45;
    }

    /* =========================
       T√çTULOS GENERALES
       ========================= */
    .sec-title{
      font-family: var(--script);
      text-align:center;
      color: var(--title);
      font-size: clamp(40px, 5vw, 64px);
      margin: 6px 0 10px;
    }

    .sec-sub{
      text-align:center;
      margin: 0;
      font-size: 16px;
      color: #7a746f;
    }

    /* =========================
       NOMBRES / FECHA / LUGAR
       ========================= */
    .names{
      font-family: var(--script);
      text-align:center;
      font-size: clamp(40px, 6vw, 74px);
      margin: 8px 0 6px;
      color: var(--gold);
      line-height: 1.05;
    }

    .date{
      text-align:center;
      font-size: clamp(18px, 3vw, 34px);
      margin: 0;
      color: var(--accent);
      font-weight: 800;
    }

    .place{
      text-align:center;
      margin: 8px 0 0;
      font-size: 16px;
      color: #6d6863;
    }

    /* =========================
       CONTADOR
       ========================= */
    .countdown{
      display:flex;
      gap: 10px;
      justify-content:center;
      flex-wrap: wrap;
      margin-top: 16px;
    }
    .cd-box{
      background: rgba(255,255,255,0.7);
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: 14px;
      padding: 10px 14px;
      min-width: 90px;
      text-align:center;
    }
    .cd-num{
      font-size: 26px;
      font-weight: 800;
      color: #4f4a45;
    }
    .cd-lbl{
      font-size: 11px;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: #7a746f;
      margin-top: 4px;
    }

    /* =========================
       VIDEO
       (autoplay suele requerir muted en m√≥viles)
       ========================= */
    .video-wrap{ display:flex; justify-content:center; }
    video{
      width: 100%;
      max-width: 820px;
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow: 0 10px 22px rgba(0,0,0,0.08);
      background: #000;
    }

    /* =========================
       GALER√çA
       ========================= */
    .masonry{
      column-count: 2;
      column-gap: 12px;
    }
    @media (min-width: 700px){
      .masonry{ column-count: 3; }
    }

    .masonry img{
      width: 100%;
      margin: 0 0 12px;
      border-radius: 16px;
      display:block;
      break-inside: avoid;
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow: 0 8px 18px rgba(0,0,0,0.10);

      /* Animaci√≥n (aparecen al hacer scroll) */
      opacity: 0;
      transform: translateY(18px);
      transition: opacity 650ms ease, transform 650ms ease;
      will-change: opacity, transform;
    }
    .masonry img.show{ opacity: 1; transform: translateY(0); }
    .masonry img.from-left{ transform: translateX(-22px); }
    .masonry img.from-right{ transform: translateX(22px); }
    .masonry img.from-left.show,
    .masonry img.from-right.show{ transform: translateX(0); }

    /* =========================
       VESTIMENTA
       ========================= */
    .grid-2{
      display:grid;
      gap: 14px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 900px){
      .grid-2{ grid-template-columns: 1fr 1fr; }
    }

    .mini-title{
      font-weight: 800;
      font-size: 18px;
      margin: 0 0 10px;
      color: #5b564f;
      text-align: center;
    }

    ul{
      margin: 0 0 14px 18px;
      line-height: 1.8;
    }

    .ref-img{
      width:100%;
      aspect-ratio: 16 / 10;
      height: auto;
      object-fit: contain;
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,0.06);
      display:block;
      background: #fff;
      padding: 6px;
    }

    .hint-center{
      text-align:center;
      font-size: 14px;
      margin-top: 10px;
      color: #6f6a65;
      font-style: italic;
    }

    /* =========================
       BLOQUES DE TEXTO IMPORTANTES
       ========================= */
    .important{
      text-align:center;
      line-height: 1.8;
      font-size: 15px;
      padding: 0 8px;
    }
    .important b{ color:#4f4a45; }

    /* =========================
       LLUVIA DE SOBRES (estilo cursivo especial)
       ========================= */
    .gift-title{
      font-family: var(--script);
      text-align:center;
      color: var(--title);
      font-size: clamp(34px, 4.5vw, 56px);
      margin: 4px 0 8px;
    }
    .gift-sub{
      text-align:center;
      margin: 0;
      color: #7a746f;
      line-height: 1.6;
      font-size: 15px;
    }

    /* =========================
       ITINERARIO
       ========================= */
    .itinerary{
      text-align:center;
      line-height: 1.8;
      font-size: 15px;
    }
    .itinerary .pill{
      display:inline-block;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.08);
      background: rgba(255,255,255,0.70);
      font-weight: 800;
      margin: 6px 0 10px;
    }
    .itinerary .days{
      display:grid;
      gap: 10px;
      margin-top: 12px;
    }
    .itinerary .day{
      border: 1px solid rgba(0,0,0,0.06);
      background: rgba(255,255,255,0.75);
      border-radius: 16px;
      padding: 12px 14px;
      text-align: left;
    }
    .itinerary .day b{ color:#4f4a45; }

    /* =========================
       WHATSAPP
       ========================= */
    .whats{
      display:flex;
      justify-content:center;
      margin-top: 14px;
    }
    .whats a{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 12px 16px;
      border-radius: 999px;
      background: rgba(255,255,255,0.8);
      border: 1px solid rgba(0,0,0,0.08);
      text-decoration:none;
      color: #3f3b37;
      font-weight: 800;
      box-shadow: 0 8px 18px rgba(0,0,0,0.08);
    }
    .wa-icon{ width: 22px; height: 22px; display:inline-block; }

    /* =========================
       FORMULARIO (CENTRADO)
       ========================= */
    .form-title{
      font-weight: 900;
      font-size: 34px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      text-align:center;
      margin: 0 0 10px;
      color: #4f4a45;
    }

    .form-sub{
      text-align:center;
      margin: 0 0 18px;
      color: #6f6a65;
      line-height:1.6;
    }

    form#rsvpForm{
      width: 100%;
      max-width: 720px;
      margin: 0 auto;
      display: grid;
      gap: 12px;
    }

    .field{
      display: grid;
      gap: 8px;
      justify-items: center;
    }

    label{
      font-size: 14px;
      color: #6f6a65;
      font-weight: 700;
      text-align: center;
      width: 100%;
    }

    input, select, textarea{
      width: 100%;
      max-width: 680px;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,0.15);
      outline: none;
      font-family: var(--body);
      font-size: 16px;
      background: rgba(255,255,255,0.92);
      text-align: center;
    }

    textarea{
      min-height: 120px;
      resize: vertical;
      text-align: left;
    }

    /* Radios izquierda/derecha */
    .radio-row{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 12px;
      flex-wrap: nowrap;
      margin: 14px 0 6px;
      width: 100%;
    }

    .radio-row label{
      display:flex;
      align-items:center;
      gap: 10px;
      font-weight: 700;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,0.65);
      border: 1px solid rgba(0,0,0,0.06);
      width: 48%;
      justify-content: center;
      text-align: center;
    }

    @media (max-width: 420px){
      .radio-row{ flex-wrap: wrap; }
      .radio-row label{ width: 100%; }
    }

    .btn{
      margin-top: 10px;
      width: 100%;
      max-width: 680px;
      justify-self: center;
      padding: 16px 16px;
      border-radius: 14px;
      border: none;
      background: var(--accent);
      color: #fff;
      font-weight: 900;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      cursor: pointer;
      font-size: 16px;
    }
    .btn:hover{ background: var(--accent-dark); }

    .status{
      margin-top: 6px;
      text-align:center;
      font-weight: 800;
    }

    /* =========================
       AUDIO toast
       ========================= */
    .audio-toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.78);
      color: #fff;
      padding: 10px 14px;
      border-radius: 999px;
      font-size: 13px;
      display:none;
      z-index: 9999;
      box-shadow: 0 10px 22px rgba(0,0,0,0.18);
      cursor: pointer;
      user-select:none;
    }
  </style>
</head>

<body>
  <!-- =========================
       AUDIO (m√∫sica de fondo)
       ========================= -->
  <audio id="bgMusic" src="musica.mp3" preload="auto" loop></audio>
  <div id="audioToast" class="audio-toast">üîä Toca aqu√≠ para activar el sonido</div>

  <div class="bg-overlay">
    <div class="wrap">

      <!-- =========================
           PORTADA
           ========================= -->
      <div class="card">
        <img class="hero-img" src="foto-portada.jpg" alt="Foto de portada de Alexandra y Daniel" />
      </div>

      <!-- =========================
           MENSAJE INICIAL
           ========================= -->
      <div class="card section">
        <div class="intro-text">
          Teniendo principalmente como testigo y gu√≠a de nuestra historia a <span class="intro-strong">Dios</span>,
          sin temor a equivocarnos y con la firme convicci√≥n de que el final de esta historia solo lo decidir√° √âl
          cuando apague alguno de nuestros corazones, <span class="intro-strong">hemos decidido unir nuestras vidas en matrimonio.</span>

          <div class="hr"></div>

          Y como cada uno de ustedes nos conoce y ha sido parte de nuestra historia,
          tenemos el gusto de contarles e invitarlos a:
        </div>
      </div>

      <!-- =========================
           NOMBRES / FECHA / LUGAR / CONTADOR
           ========================= -->
      <div class="card section">
        <p class="sec-sub">Nuestra Boda</p>
        <div class="names">Alexandra Gil &amp; Daniel √Ålvarez</div>

        <!-- ‚úÖ CAMBIO 2: fecha con hora 4:00 PM -->
        <p class="date">Viernes 13 de noviembre de 2026 a las 4:00 PM</p>

        <p class="place"><b>Lugar:</b> En alguna playa de Cove√±as, Sucre üèñÔ∏è</p>

        <div class="countdown" id="countdown">
          <div class="cd-box">
            <div class="cd-num" id="cdDays">--</div>
            <div class="cd-lbl">D√≠as</div>
          </div>
          <div class="cd-box">
            <div class="cd-num" id="cdHours">--</div>
            <div class="cd-lbl">Horas</div>
          </div>
          <div class="cd-box">
            <div class="cd-num" id="cdMins">--</div>
            <div class="cd-lbl">Min</div>
          </div>
          <div class="cd-box">
            <div class="cd-num" id="cdSecs">--</div>
            <div class="cd-lbl">Seg</div>
          </div>
        </div>
      </div>

      <!-- =========================
           VIDEO (AUTOPLAY)
           - Archivo: video.mp4
           - muted para permitir autoplay en m√≥vil
           ========================= -->
      <div class="card section">
        <div class="sec-title">Cuando nos dijimos que SI</div>
        <p class="sec-sub">Un pedacito de nosotros üíõ</p>
        <div class="hr"></div>

        <div class="video-wrap">
          <video
            id="ourVideo"
            src="video.mp4"
            autoplay
            muted
            loop
            playsinline
            preload="metadata"
          >
            Tu navegador no soporta video HTML5.
          </video>
        </div>
      </div>

      <!-- =========================
           GALER√çA
           ========================= -->
      <div class="card section">
        <div class="sec-title">Nuestra Historia en Fotos</div>
        <p class="sec-sub">Algunos momentos que queremos compartir contigo</p>
        <div class="hr"></div>

        <div class="masonry" id="photoMasonry">
          <img src="fotos/foto-01.jpg" alt="Foto 01">
          <img src="fotos/foto-02.jpg" alt="Foto 02">
          <img src="fotos/foto-03.jpg" alt="Foto 03">
          <img src="fotos/foto-04.jpg" alt="Foto 04">
          <img src="fotos/foto-05.jpg" alt="Foto 05">
          <img src="fotos/foto-06.jpg" alt="Foto 06">
          <img src="fotos/foto-07.jpg" alt="Foto 07">
          <img src="fotos/foto-08.jpg" alt="Foto 08">
          <img src="fotos/foto-09.jpg" alt="Foto 09">
          <img src="fotos/foto-10.jpg" alt="Foto 10">
          <img src="fotos/foto-11.jpg" alt="Foto 11">
          <img src="fotos/foto-12.jpg" alt="Foto 12">
          <img src="fotos/foto-13.jpg" alt="Foto 13">
          <img src="fotos/foto-14.jpg" alt="Foto 14">
          <img src="fotos/foto-15.jpg" alt="Foto 15">
          <img src="fotos/foto-16.jpg" alt="Foto 16">
        </div>
      </div>

      <!-- =========================
           VESTIMENTA
           ========================= -->
      <div class="card section">
        <div class="sec-title">Dress Code</div>
        <p class="sec-sub">Gu√≠a sugerida para la boda</p>
        <div class="hr"></div>

        <div class="grid-2">
          <div>
            <div class="mini-title">Hombres</div>
            <ul>
              <li>Camisa <b>blanca</b> (preferiblemente como en la foto).</li>
              <li>Pantal√≥n color <b>beige/arena</b>.</li>
              <li>Estilo playero elegante.</li>
            </ul>
            <img class="ref-img" src="vestimenta-hombres.jpg" alt="Referencia de vestimenta para hombres">
          </div>

          <div>
            <div class="mini-title">Mujeres</div>
            <ul>
              <li>Vestidos en tono <b>beige</b> (preferiblemente como en la foto).</li>
              <li><b>Recomendaci√≥n:</b> por ser en playa, es recomendable <b>no</b> llevar tac√≥n (ideal sandalias/flat).</li>
            </ul>
            <img class="ref-img" src="vestimenta-mujeres.jpg" alt="Referencia de vestimenta para mujeres">
          </div>
        </div>

        <div class="hint-center">(Estas im√°genes son solo una gu√≠a de estilo)</div>
      </div>

      <!-- =========================================================
           ‚úÖ CAMBIO 5: ITINERARIO (ANTES DE CONFIRMACI√ìN)
           ========================================================= -->
      <div class="card section">
        <div class="sec-title">Itinerario</div>
        <p class="sec-sub">13 al 15 de noviembre (3 d√≠as)</p>
        <div class="hr"></div>

        <div class="itinerary">
          <div class="pill">üíõ Hospedaje y comida incluidos</div>
          <p style="margin: 0;">
            Nosotros como pareja vamos a cubrir la invitaci√≥n de <b>hospedaje y comida</b>, y ser√° del <b>13 al 15 de Noviembre</b>.
          </p>

          <div class="days">
            <div class="day">
              <b>D√≠a 1 ‚Äì 13 de Noviembre:</b><br>
              Fecha del matrimonio y <b>Boda</b>, evento principal.
            </div>

            <div class="day">
              <b>D√≠a 2 ‚Äì 14 de Noviembre:</b><br>
              <b>Desenguayabe</b> con los novios.
            </div>

            <div class="day">
              <b>D√≠a 3 ‚Äì 15 de Noviembre:</b><br>
              <b>D√≠a Final</b>.
            </div>
          </div>
        </div>
      </div>

      <!-- =========================================================
           ‚úÖ CAMBIO 3: LLUVIA DE SOBRES (ANTES DE CONFIRMACI√ìN)
           ========================================================= -->
      <div class="card section">
        <div class="gift-title">Lluvia de Sobres</div>
        <p class="gift-sub">
          Tu presencia es lo m√°s importante para nosotros. <br>
          Si deseas tener un detalle, puedes hacerlo por medio de <b>lluvia de sobres</b> üíå
        </p>
      </div>

      <!-- =========================================================
           ‚úÖ CAMBIO 1: TEXTO DE CONFIRMACI√ìN CON FECHA L√çMITE
           ========================================================= -->
      <div class="card section">
        <div class="sec-title">Confirmaci√≥n</div>
        <div class="important">
          Para nosotros es s√∫per importante organizar todo de la mejor manera.
          Por eso, te pedimos por favor confirmar tu asistencia <b>hasta el 20 de Febrero de 2026</b>.
          <br><br>
          Si no recibimos confirmaci√≥n en ese tiempo, entenderemos (con todo cari√±o) que no podr√°s asistir.
          ¬°Gracias por ayudarnos a planear este d√≠a tan especial!
        </div>

        <div class="whats">
          <a href="https://wa.me/573212363753" target="_blank" rel="noopener noreferrer" aria-label="Escr√≠benos por WhatsApp">
            <svg class="wa-icon" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M16 3C9.1 3 3.5 8.5 3.5 15.3c0 2.4.7 4.7 2 6.7L4 29l7.2-1.9c1.9 1 4.1 1.6 6.3 1.6 6.9 0 12.5-5.5 12.5-12.3S22.9 3 16 3Z" fill="#25D366"/>
              <path d="M24.1 19.5c-.3-.2-1.8-.9-2.1-1-.3-.1-.6-.2-.9.2-.3.4-1 1-1.2 1.2-.2.2-.4.2-.7.1-.3-.2-1.4-.5-2.7-1.6-1-0.9-1.6-2-1.8-2.3-.2-.3 0-.5.1-.7.1-.1.3-.4.5-.6.2-.2.2-.4.3-.6.1-.2 0-.4 0-.6 0-.2-.9-2.2-1.2-3-.3-.8-.7-.7-.9-.7h-.8c-.3 0-.6.1-.9.4-.3.3-1.2 1.1-1.2 2.8 0 1.6 1.2 3.2 1.4 3.5.2.3 2.4 3.8 5.9 5.1.8.3 1.4.5 1.9.6.8.2 1.5.2 2 .1.6-.1 1.8-.7 2.1-1.4.3-.7.3-1.3.2-1.4-.1-.2-.3-.2-.6-.4Z" fill="#fff"/>
            </svg>
            ¬øDudas? Escr√≠benos por WhatsApp: <b>+57 321 236 3753</b>
          </a>
        </div>
      </div>

      <!-- =========================
           FORMULARIO RSVP
           ========================= -->
      <div class="card section">
        <div class="form-title">CONFIRMAR ASISTENCIA</div>
        <p class="form-sub">
          Por favor, confirma tu asistencia<br>
          ¬°Esperamos que est√©s all√≠!
        </p>

        <form id="rsvpForm">
          <div class="radio-row">
            <label>
              <input type="radio" name="asistencia" value="S√≠, all√≠ estar√©" checked>
              S√≠, all√≠ estar√©
            </label>
            <label>
              <input type="radio" name="asistencia" value="No podr√© asistir">
              No podr√© asistir
            </label>
          </div>

          <div class="field">
            <label for="responsable">Nombre del responsable (quien confirma)</label>
            <input id="responsable" name="responsable" type="text" placeholder="Ej: Juan P√©rez" required>
          </div>

          <div class="field">
            <label for="cantidad">¬øCu√°ntas personas incluye esta invitaci√≥n?</label>
            <select id="cantidad" name="cantidad" required>
              <option value="1">1 persona</option>
              <option value="2">2 personas</option>
              <option value="3">3 personas</option>
              <option value="4">4 personas</option>
              <option value="5">5 personas</option>
              <option value="6">6 personas</option>
            </select>
          </div>

          <div id="guestFields"></div>

          <div class="field">
            <label for="alergias">Intolerancias o alergias alimentarias</label>
            <input id="alergias" name="alergias" type="text" placeholder="Ej: Ninguna">
          </div>

          <div class="field">
            <label for="cancion">¬øQu√© canci√≥n no puede faltar?</label>
            <input id="cancion" name="cancion" type="text" placeholder="Ej: Nuestra canci√≥n favorita">
          </div>

          <div class="field">
            <label for="mensaje">Mensaje para los novios</label>
            <textarea id="mensaje" name="mensaje" placeholder="Escribe tu mensaje..."></textarea>
          </div>

          <button class="btn" type="submit" id="submitBtn">ENVIAR RESPUESTA</button>
          <!-- ‚úÖ CAMBIO 6: eliminada la advertencia de Google Sheets -->
          <div id="status" class="status"></div>
        </form>
      </div>

    </div>
  </div>

  <script>
    /* ==========================================================
       1) URL DE APPS SCRIPT (donde se guardan respuestas)
       ========================================================== */
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyfFfm4Xi_17QaxKPAN8RLziPAw1NiYuByWMy6ttifwUANZecb_v5DNStsm5pCtvhzk7w/exec";

    /* ==========================================================
       2) CONTADOR
       - Importante: esto afecta el tiempo restante
       - 4:00 PM en Colombia (-05:00)
       ========================================================== */
    const weddingDate = new Date("2026-11-13T16:00:00-05:00");

    function pad2(n){ return String(n).padStart(2, "0"); }

    function updateCountdown(){
      const now = new Date();
      const diff = weddingDate - now;

      const dEl = document.getElementById("cdDays");
      const hEl = document.getElementById("cdHours");
      const mEl = document.getElementById("cdMins");
      const sEl = document.getElementById("cdSecs");

      if (diff <= 0){
        dEl.textContent = "0";
        hEl.textContent = "00";
        mEl.textContent = "00";
        sEl.textContent = "00";
        return;
      }

      const totalSeconds = Math.floor(diff / 1000);
      const days = Math.floor(totalSeconds / 86400);
      const hours = Math.floor((totalSeconds % 86400) / 3600);
      const mins = Math.floor((totalSeconds % 3600) / 60);
      const secs = totalSeconds % 60;

      dEl.textContent = days;
      hEl.textContent = pad2(hours);
      mEl.textContent = pad2(mins);
      sEl.textContent = pad2(secs);
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();

    /* ==========================================================
       3) INVITADOS DIN√ÅMICOS
       - Crea inputs seg√∫n la cantidad seleccionada
       ========================================================== */
    const cantidadEl = document.getElementById("cantidad");
    const guestFields = document.getElementById("guestFields");

    function renderGuestFields(){
      const n = Number(cantidadEl.value || 1);
      guestFields.innerHTML = "";

      for (let i = 1; i <= n; i++){
        const wrap = document.createElement("div");
        wrap.className = "field";
        wrap.innerHTML = `
          <label for="inv${i}">Nombre del invitado ${i}</label>
          <input id="inv${i}" name="inv${i}" type="text" placeholder="Invitado ${i}" ${i === 1 ? "required" : ""}>
        `;
        guestFields.appendChild(wrap);
      }
    }

    cantidadEl.addEventListener("change", renderGuestFields);
    renderGuestFields();

    /* ==========================================================
       4) ENV√çO DEL FORMULARIO
       - Env√≠a datos a Apps Script (Google Sheets por detr√°s)
       ========================================================== */
    const form = document.getElementById("rsvpForm");
    const statusEl = document.getElementById("status");
    const submitBtn = document.getElementById("submitBtn");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      submitBtn.disabled = true;
      submitBtn.textContent = "ENVIANDO...";

      statusEl.textContent = "";
      statusEl.style.color = "";

      const asistencia = form.querySelector('input[name="asistencia"]:checked')?.value || "";
      const responsable = document.getElementById("responsable").value.trim();
      const cantidad = Number(document.getElementById("cantidad").value || 0);

      const invitados = [];
      for (let i = 1; i <= cantidad; i++){
        invitados.push((document.getElementById(`inv${i}`)?.value || "").trim());
      }

      const alergias = (document.getElementById("alergias").value || "").trim();
      const cancion = (document.getElementById("cancion").value || "").trim();
      const mensaje = (document.getElementById("mensaje").value || "").trim();
      const info = navigator.userAgent || "";

      const payload = { asistencia, responsable, cantidad, invitados, alergias, cancion, mensaje, info };

      try {
        const res = await fetch(SCRIPT_URL, {
          method: "POST",
          mode: "cors",
          headers: { "Content-Type": "text/plain;charset=utf-8" },
          body: JSON.stringify(payload)
        });

        const data = await res.json();

        if (data.ok){
          statusEl.style.color = "#2f6f3e";
          statusEl.textContent = "‚úÖ " + (data.message || "Confirmaci√≥n registrada correctamente.");
          form.reset();
          renderGuestFields();
        } else {
          statusEl.style.color = "#b00020";
          statusEl.textContent = "‚ö†Ô∏è " + (data.message || "No se pudo registrar. Intenta de nuevo.");
        }
      } catch (err){
        statusEl.style.color = "#b00020";
        statusEl.textContent = "‚ö†Ô∏è Error enviando la confirmaci√≥n. Intenta de nuevo.";
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = "ENVIAR RESPUESTA";
      }
    });

    /* ==========================================================
       5) M√öSICA AUTOM√ÅTICA
       - Si el navegador bloquea autoplay, mostramos el bot√≥n
       ========================================================== */
    const bgMusic = document.getElementById("bgMusic");
    const audioToast = document.getElementById("audioToast");

    async function tryAutoplay(){
      try{
        await bgMusic.play();
        audioToast.style.display = "none";
      } catch (e){
        audioToast.style.display = "block";
      }
    }

    audioToast.addEventListener("click", async () => {
      try{
        await bgMusic.play();
        audioToast.style.display = "none";
      } catch(e){
        audioToast.style.display = "block";
      }
    });

    document.addEventListener("DOMContentLoaded", tryAutoplay);

    /* ==========================================================
       6) ANIMACI√ìN DE FOTOS (aparecen al scrollear)
       ========================================================== */
    const galleryImgs = Array.from(document.querySelectorAll("#photoMasonry img"));
    galleryImgs.forEach((img) => {
      const r = Math.random();
      if (r < 0.33) img.classList.add("from-left");
      else if (r < 0.66) img.classList.add("from-right");
    });

    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting){
          entry.target.classList.add("show");
          io.unobserve(entry.target);
        }
      });
    }, { threshold: 0.12 });

    galleryImgs.forEach(img => io.observe(img));
  </script>
</body>
</html>
